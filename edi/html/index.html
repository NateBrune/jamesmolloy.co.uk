<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Extensible Device Interface: Main Page</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>Extensible Device Interface Documentation</h1>
<p>
<h3 align="center">3 </h3>Copyright (c) 2006 Eli Gottlieb. Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.2 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the file entitled "COPYING".<p>
Notes on types: All integer types are signed by default, the size of pointer types is determined by hardware and all data structures - including arrays - are packed. Whenever a numerical NULL value is referred to, the value 0 for the appropriate type is meant.<p>
Overview<p>
The Extensible Driver Interface (EDI) is a device driver interface standard which aims to maximize portability of device drivers between operating systems while minimizing the amount of standardized functionality and supporting non-standard functionality. It does this by standardizing only a small, fixed interface to the level of source-portability. Drivers can use this standardized interface to converse with the operating system kernel about the hardware run by the driver - and about non-standardized functionality - through the EDI runtime implementing this interface. Anything not explicitly standardized under EDI is up to operating system developers.<p>
The chief way in which EDI does this is through the use of a semi-object-oriented class model. The core of the standardized EDI interface is a set of functions for registering, instantiating and destroying classes, along with obtaining function pointers to their methods. To EDI, a class is a set of functions associated with a constructor and a destructor. These routines are implemented by either a driver or a runtime, and are said to be "owned" by their implementor. Having all class routines (including allocation of memory) be implemented by the class owner allows driver and operating system developers as much leeway as possible in implementing EDI-compatible drivers and EDI runtimes.<p>
EDI also requires that runtimes implement a subset of POSIX threading. This could mean that processor time is multiplexed between different drivers or within drivers. It could mean that drivers are processes like any other, but with special system calls (EDI itself). It could mean something entirely else. As long as the semantics of the POSIX Threads subset work from the driver's point of view and different threads can see each other's memory, anything goes.<p>
EDI also standardizes several classes for runtimes to implement. These deal with talking to hardware via port I/O, memory mapped I/O, interrupt handling and Direct Memory Access hardware. For DMA a stream model is used, while port I/O and memory mapped I/O follow their own, self-evident models. A standardized class for interrupt handling is also provided, though runtimes can decide on a fair deal of its behavior.<p>
To use EDI a driver exports two functions from its binary: a <a class="el" href="edi_8h.html#caa437fe93b69172d5ff0833b7e18b14">driver_init_t()</a> and a <a class="el" href="edi_8h.html#7a3da788ad41f1e6f6397c4e698e39d9">driver_finish_t()</a>. When the runtime finishes creating an EDI object for a driver, it calls driver_init() with a list of objects it thinks the driver should run with. This list can be created however suits the runtime. The driver reads this list and initializes itself and its classes, possibly calling <a class="el" href="edi_8h.html#49ba0b7c3034df69068cbd3dc9a205cb">edi_negotiate_resources()</a> to obtain more resources. If the runtime passed an empty resource list it must return true from <a class="el" href="edi_8h.html#49ba0b7c3034df69068cbd3dc9a205cb">edi_negotiate_resources()</a>. Once the driver has initialized itself, it returns an <a class="el" href="structedi__initialization__t.html">edi_initialization_t</a> structure containing a list of its classes the runtime can use, along with its quota function. If the driver can't properly initialize, it should return NULL or 0 in any field of <a class="el" href="structedi__initialization__t.html">edi_initialization_t</a> to indicate this, and the runtime will shut EDI and the driver down. Once the driver has initialized, the runtime may create instances of the classes given it and use these to call driver functionality.<p>
When the driver is finished it calls <a class="el" href="edi_8h.html#c5cbb5111fd6491d7ab44d0945445073">shutdown_edi()</a>, optionally destroying all objects first. If it doesn't destroy them, the runtime should. The runtime can also call <a class="el" href="edi_8h.html#c5cbb5111fd6491d7ab44d0945445073">shutdown_edi()</a> at any time, and <a class="el" href="edi_8h.html#c5cbb5111fd6491d7ab44d0945445073">shutdown_edi()</a> should always call the driver's driver_finish() routine to allow the driver to clean up.<p>
In conclusion, the Extensible Driver Interface tries to provide the greatest possible design and programming options to operating system kernels and the greatest possible portability to drivers by standardizing a small interface for doing only the things common to all device drivers on all operating systems (talking to hardware) and for checking for other functionality. It mostly does this through its object model and through the standardized classes the EDI runtime must provide, while allowing both driver and runtime to require each other to implement nonstandard classes if they truly require the functionality. <hr size="1"><address style="align: right;"><small>Generated on Fri Oct 27 20:00:03 2006 for Extensible Device Interface by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
